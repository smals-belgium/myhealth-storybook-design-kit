@if(isMobile){ Mobile view } @else { @if(search()){
<mat-form-field appearance="outline" class="mh-table__search">
  <mat-icon matPrefix fontIcon="search" aria-hidden="true" />
  <input
    matInput
    type="text"
    class="mh-table__search__input"
    name="search"
    placeholder="Search ..."
    [(ngModel)]="searchValue"
    (keyup)="onSearch()"
  />
</mat-form-field>
}
<table mat-table [dataSource]="dataSource()" [multiTemplateDataRows]="expandEnabled()" matSort>
  <!-- All columns, defined by the column definitions -->
  @for (column of columns(); track column) { @if (column !== 'actions') {
  <ng-container [matColumnDef]="column">
    <th mat-header-cell mat-sort-header *matHeaderCellDef>
      <span>{{ column }}</span>
      <mat-icon fontIcon="swap_vert" />
    </th>
    <td mat-cell *matCellDef="let element">
      @if(column === 'select'){
      <mat-checkbox
        (click)="$event.stopPropagation()"
        (change)="$event ? selection.toggle(element) : null"
        [checked]="selection.isSelected(element)"
        [aria-label]="
          selection.isSelected(element) ? 'Deselected row ' + element.index : 'Selected row ' + element.index
        "
      >
      </mat-checkbox>
      } @else {
      {{ !element[column] || element[column] === '' ? '-' : element[column] }}
      }
    </td>
  </ng-container>
  } }

  <!-- Expand column -->
  @if (expandEnabled()) {
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef class="align-right" aria-label="row actions">Actions</th>
    <td mat-cell *matCellDef="let element">
      <button
        mat-icon-button
        type="button"
        [attr.aria-label]="expandedElementIndex() === element.index ? 'Show less' : 'Show more'"
        [attr.aria-expanded]="expandedElementIndex() === element.index"
        [attr.aria-controls]="'detail-row-' + element.index"
        (click)="setExpandedIndex(element.index)"
      >
        <mat-icon [fontIcon]="expandedElementIndex() === element.index ? 'keyboard_arrow_up' : 'keyboard_arrow_down'" />
      </button>
    </td>
  </ng-container>
  }

  <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
  @if (expandEnabled()) {
  <ng-container matColumnDef="expandDetail">
    <td mat-cell *matCellDef="let element" [colSpan]="columns().length">
      <dl>
        <dt>Name</dt>
        <dd>{{ element.name }}</dd>
        <dt>Description</dt>
        <dd>{{ element.description }}</dd>
        <dt>Date</dt>
        <dd>{{ element.date }}</dd>
      </dl>
    </td>
  </ng-container>
  }

  <!-- Header row -->
  <tr mat-header-row *matHeaderRowDef="columns()"></tr>
  <!-- Data row -->
  <tr
    [hidden]="isLoading()"
    mat-row
    *matRowDef="let row; columns: columns()"
    (click)="clickRow(row)"
    [class]="isSelectable() ? 'mh-cursor-pointer' : ''"
  ></tr>

  @if (expandEnabled()) {
  <!-- Detail row -->
  <tr
    class="mh-detail-row"
    mat-row
    *matRowDef="let row; columns: ['expandDetail']"
    [class.mh-detail-row--expanded]="row.index === expandedElementIndex()"
    [hidden]="row.index !== expandedElementIndex()"
    [id]="'detail-row-' + row.index"
  ></tr>
  }
</table>
@if (isLoading()) {
<ngx-skeleton-loader
  [count]="
    dataSource().data.length <= 0 ? 3 : dataSource().data.length > pageSize ? pageSize : dataSource().data.length
  "
  appearance="line"
  [theme]="{
    height: '47px',
    margin: '0'
  }"
/>
} }
